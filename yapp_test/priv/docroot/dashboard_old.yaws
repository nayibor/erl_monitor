<erl>
-include_lib("yapp_test/include/yapp_test.hrl").


%%% @doc check to see whether use is logged in 
out(Arg) ->
		Uri = yaws_api:request_url(Arg),
        Path = string:tokens(Uri#url.path, "/"),
        io:format("Path is ~p~n",[Path]),
		out(Arg,yapp_test_lib_sess:check_login(Arg,?COOKIE_VARIABLE)).
		
%%% @doc for redirecting users not logged in back to index page  
out(Arg,error)->
	io:format("error cookie not avialable"),
	{page,yapp:prepath(Arg)++?AUTH_PAGE};

%%% @doc user is logged but check has to be still done as to whether user has access to page 
out(Arg,ok) ->
	io:format("cookie available"),
	{html,"<h1>you are on dashboard page free of charge no charge</h1>"}.

%%%allowed uses are allowd to enter the page finally

%%logged in users whom dont have access to page are shown the page for restricted users
	
</erl>

